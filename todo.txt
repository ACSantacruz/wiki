### Todo List

#### Wikispecies
1. Maybe figure out redirects?
2. Investigate linking and output (pdf?  wikitext?)
3. Cleanup, rerun, maybe publish?

#### S-index
- ACTUAL NEW PLAN
-- Enable bot not bot in sysopHindex.pl
--- Add option to turn off/on bot filtering
-- Update calcH.pl
--- Remove cruft (still available in old versions, should compare regularly/readily)
--- Just month by month
--- Fix input/output formatting
---- Need to append correct end date
--- Output month,nobot,bot
-- R for nice graphs
--- Nice month x-axis
--- Diff colors and legend
--- Auto export image
-- Fix workflow
--- Update getDates.pl
--- Update shim
-- More exotic export options
--- 3/6/9/12 rolling
-- Redesign so calch processes, then returns array to shim for parsing?  Eh






- calch = bulk calc over period, goes through h_index files for each month, calls sysop
- sysop = actual calculations
- workflow:
-- bash shim (needs updating)
-- check time of last data grab
-- getDates.pl
-- shim curls all data
-- shim calc md5 for raw data files
-- checkData confirms timestamp (this might need to change with new data source)
-- table2csv.pl (needs updating) converts to processed csv
-- shim check for dupes
-- calcH.pl (handles dates ranges/styles (currently does all of them) and calls sysopHindex.pl
--- sysopHindex.pl has checking for bots, renames(?), etc.?
0. Rewrite using xtools
- Double check that xtools includes everything (revdel (in del), etc.)
- Rewrite table2csv.pl to work on html from xtools
- Double check results are the same
- Massive rewrite for calcH.pl (well actually sysopHindex.pl)
-- There is no need to calculate differences anymore
-- Instead, just count lines until S is found
-- Be careful, since total for jan via AS is 2018-02-01 minus 2018-02-01
-- Check if https://github.com/x-tools/xtools/commit/429907894301075a4686c5c46e2da79d75aeaf81 affected api versus curl
- Could also take multiple months and dump into a hash for username, thus allowing other timelines
-- Would have sysopHindex.pl parse all inputs, tally them all up regardless, then calc
-- If it's just one, no need to add up, so then calculate
- Since Xtools has ranked list, can actually avoid calculating/process anything for the monthly data aka the big kahuna
-- Basically, just check if the rank is >= the total.  When it's not (i.e. #40 has 40 actions but #41 does too) the previous rank (i.e., 40) is the index
-- Only works if we include *all* users (i.e., also bots).  Maybe a second graph?  Might be interesting...
-- Basically what we'll have to do anyway since xtools means no calculation is needed, so maybe not
1. (Re)Write
- Format changed between 18 feb 2010 and 21 feb 2010
- Start March 2010, or process separately
- Wait 2012 or 2010?????
- Something big hapened in 2014 between March and April
- OKAY FOUND IT: https://en.wikipedia.org/w/index.php?title=User:JamesR/AdminStats&diff=599109968&oldid=599107237&diffonly=1
- Started listing everyone who made a logged action, not just current sysops
- Presents an issue - data previous to this likely unreliable (See Zoe for an example)
- But starting data April 2014 gives us a really short timespan
- USE ADMINSTATS XTOOL
- [[Special:Permalink/832905359#AdminStats fix]]
- Use API: https://xtools.readthedocs.io/en/stable/api/project.html#admin-statistics
- Will have to parse json, but okay...
- Actually, can't use json, API is only limited to <=30 days before present
- Just pull actual html and parse.  Annoying but that's what perl is for.
- Date in xtool probably 00:00 UTC so for all of Jan need to go 0101 to 0201 not 0131
-- Actually maybe not!
- sysopdev to take only user and total
- table to take name and save... somewhere
- also calculate md5, export to list
- bash shim checks lists
- checkData finds timestamp, ensures reasonable given title
- Move sysopHindex into calcH, rename.  Add option for files?
- Shouldn't open files in subroutine, do so beforehand and... pass?
2. Map out pipeline (what categories, what measures, etc.)
- finance isn't rolling, quarter is
- could set up rolling average, allow x number of months
- then make quarters quarters like finance
- make years years
- add academic calendar a la non rolling
- remove problematic users?
- allow for deletion, protection, etc indicdes
3. Figure out how I want to graph various data (quarters, months, years, etc.) (also include number of sysops, number of active sysops, etc.?)
4. Bash shim to lump it all together and update?  Make sure don't re-download everything
- Need to deal with renames, etc
5. Easy way to get graphs on wiki (ugh commons)
- Use https://en.wikipedia.org/wiki/Template:Graph:Chart
6. Advertize?  WT:ADMIN, RFA, BN, INACTIVEADMIN


curl -d "" 'https://en.wikipedia.org/w/index.php?title=Special:Export&pages=User:JamesR/AdminStats&offset=2018-02-21T15:00:00Z&limit=1&action=submit' -o james
